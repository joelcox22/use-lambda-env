# ~~ Generated by projen. To modify, edit .projenrc.js and run "npx projen".

name: update-boilerplate
on:
  workflow_dispatch: {}
jobs:
  update-boilerplate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          token: ${{ secrets.BOILERPLATE_GH_TOKEN }}
      - uses: actions/setup-node@v2
        with:
          node-version: "14"
          registry-url: https://npm.pkg.github.com
          scope: "@joelcox22"
      - run: yarn
        env:
          NODE_AUTH_TOKEN: ${{ secrets.BOILERPLATE_GH_TOKEN }}
      - run: git branch -d update-boilerplate || true
      - run: git push origin :update-boilerplate || true
      - run: git checkout -b update-boilerplate
      - run: git config --global user.email "joel@pinecodes.com"
      - run: git config --global user.name "Joel Cox"
      - run: yarn update-boilerplate
        env:
          NODE_AUTH_TOKEN: ${{ secrets.BOILERPLATE_GH_TOKEN }}
      - run: git status
      - run: git add .
      - run: "git commit -m 'chore: update boilerplate'"
      - run: git push --set-upstream origin update-boilerplate
      - run: 'gh pr create --fill --reviewer joelcox22 --title "chore: update
          boilerplate"'
        env:
          GITHUB_TOKEN: ${{ secrets.BOILERPLATE_GH_TOKEN }}
      - run: gh pr merge --auto
        env:
          GITHUB_TOKEN: ${{ secrets.BOILERPLATE_GH_TOKEN }}
